{{ 'section-banner-hero.css' | asset_url | stylesheet_tag }}

<section class="hero-section">
  {%- for block in section.blocks -%}
    {%- case block.type -%}
      {%- when 'slide' -%}
        <div class="slide{% if forloop.index0 == 0 %} slide--active{% else %} slide--inactive{% endif %}" data-slide-index="{{ forloop.index0 }}">
          <div class="slide__image" style="background-image: url({{ block.settings.image | img_url: 'master' }})">
            <div class="slide__overlay"></div>
          </div>
          
          <div class="slide__content">
            <div class="container-custom">
              <div class="content-wrapper">
                <h2 class="subtitle">{{ block.settings.subtitle }}</h2>
                <h1 class="title">{{ block.settings.title }}</h1>
                <a href="{{ block.settings.button_link }}" class="cta-link">
                  <span class="cta-text">{{ block.settings.button_label }}</span>
                  <svg class="cta-arrow" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M5 12h14m-7-7 7 7-7 7"/>
                  </svg>
                </a>
              </div>
            </div>
          </div>
        </div>
    {%- endcase -%}
  {%- endfor -%}

  <div class="indicators">
    <div class="container-custom">
      <div class="indicators__wrapper">
        {%- for block in section.blocks -%}
          {%- if block.type == 'slide' -%}
            <button
              class="indicator{% if forloop.index0 == 0 %} indicator--active{% endif %}"
              data-slide-button="{{ forloop.index0 }}"
              aria-label="Go to slide {{ forloop.index }}"
            ></button>
          {%- endif -%}
        {%- endfor -%}
      </div>
    </div>
  </div>
</section>

<script>
  class HeroSlider {
    constructor(container) {
      this.container = container;
      this.slides = container.querySelectorAll('.slide');
      this.indicators = container.querySelectorAll('.indicator');
      this.currentSlide = 0;
      this.slideInterval = null;
      
      this.init();
    }

    init() {
      this.startAutoPlay();
      this.setupIndicators();
    }

    startAutoPlay() {
      this.slideInterval = setInterval(() => {
        this.nextSlide();
      }, 6000);
    }

    nextSlide() {
      const nextIndex = (this.currentSlide + 1) % this.slides.length;
      this.goToSlide(nextIndex);
    }

    goToSlide(index) {
      // Remove active classes
      this.slides[this.currentSlide].classList.remove('slide--active');
      this.slides[this.currentSlide].classList.add('slide--inactive');
      this.indicators[this.currentSlide].classList.remove('indicator--active');

      // Add active classes to new slide
      this.slides[index].classList.add('slide--active');
      this.slides[index].classList.remove('slide--inactive');
      this.indicators[index].classList.add('indicator--active');

      this.currentSlide = index;
    }

    setupIndicators() {
      this.indicators.forEach((indicator, index) => {
        indicator.addEventListener('click', () => {
          clearInterval(this.slideInterval);
          this.goToSlide(index);
          this.startAutoPlay();
        });
      });
    }
  }

  // Initialize all sliders on the page
  document.addEventListener('DOMContentLoaded', () => {
    const sliders = document.querySelectorAll('.hero-section');
    sliders.forEach(slider => new HeroSlider(slider));
  });
</script>

{% schema %}
{
  "name": "Hero Slider",
  "tag": "section",
  "class": "section",
  "settings": [],
  "blocks": [
    {
      "type": "slide",
      "name": "Slide",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Slide Image"
        },
        {
          "type": "text",
          "id": "subtitle",
          "label": "Subtitle",
          "default": "LUXURY TABLEWARE"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Fall/Winter Collection"
        },
        {
          "type": "text",
          "id": "button_label",
          "label": "Button Label",
          "default": "Explore Collection"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Button Link"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Hero Slider",
      "blocks": [
        {
          "type": "slide"
        },
        {
          "type": "slide"
        },
        {
          "type": "slide"
        }
      ]
    }
  ]
}
{% endschema %}
